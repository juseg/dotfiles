# Copyright (c) 2023, Julien Seguinot (juseg.dev)
# GNU General Public License v3.0+ (https://www.gnu.org/licenses/gpl-3.0.txt)
#
# ~/.config/mbsync/config - Mbsync (isync) configuration file

# remote account
IMAPStore home-remote
Host mail.gandi.net
UserCmd "secret-tool lookup account home value user"
PassCmd "secret-tool lookup account home value pass"
SSLType IMAPS
CertificateFile /etc/ssl/certs/ca-certificates.crt

# local store
MaildirStore home-local
SubFolders Verbatim
Path ~/.local/share/mail/home/
Inbox ~/.local/share/mail/home/Inbox

# channel
Channel home
Far :home-remote:
Near :home-local:
Patterns *
Create Both
Expunge Both
SyncState *

# remote account
IMAPStore posteo-remote
Host posteo.de
UserCmd "secret-tool lookup account posteo value user"
PassCmd "secret-tool lookup account posteo value pass"
SSLType IMAPS
CertificateFile /etc/ssl/certs/ca-certificates.crt

# local store
MaildirStore posteo-local
SubFolders Verbatim
Path ~/.local/share/mail/posteo/
Inbox ~/.local/share/mail/posteo/Inbox

# channel
Channel posteo
Far :posteo-remote:
Near :posteo-local:
Patterns *
Create Both
Expunge Both
SyncState *

# remote account
IMAPStore uib-remote
Host outlook.office365.com
AuthMechs XOAUTH2
UserCmd "secret-tool lookup account uib value user"
PassCmd "/usr/share/neomutt/oauth2/mutt_oauth2.py ~/.local/var/uib.tokens --encryption-pipe 'gpg --encrypt --recipient oauth2'"
SSLType IMAPS
CertificateFile /etc/ssl/certs/ca-certificates.crt

# local store
MaildirStore uib-local
SubFolders Verbatim
Path ~/.local/share/mail/uib/
Inbox ~/.local/share/mail/uib/Inbox

# channel
Channel uib
Far :uib-remote:
Near :uib-local:
Patterns *
Create Both
Expunge Both
SyncState *
